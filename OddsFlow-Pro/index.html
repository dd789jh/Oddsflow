<!DOCTYPE html>
<html lang="zh-CN" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OddsFlow AI - æ™ºèƒ½è¶³çƒäº¤æ˜“ç»ˆç«¯</title>
    
    <meta name="description" content="OddsFlow AI - å®æ—¶è¶³çƒèµ”ç‡ç›‘æ§ä¸è‹±è¶…å¤§æ•°æ®åˆ†æã€‚">
    
    <!-- æ ¸å¿ƒ SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #000; color: #e5e7eb; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* 1. ç”µå½±çº§åŠ¨æ€èƒŒæ™¯ */
        .hero-wrapper {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            overflow: hidden;
            z-index: 0;
        }
        .hero-bg {
            /* è¿™æ˜¯ä¸€ä¸ªæ·±å¤œçƒåœºçš„å›¾ï¼Œéå¸¸æœ‰è´¨æ„Ÿ */
            background-image: url('https://images.unsplash.com/photo-1504305754058-2f08ccd89a05?q=80&w=2070&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            width: 100%; height: 100%;
            opacity: 0.4;
            /* å‘¼å¸ç‰¹æ•ˆï¼šç¼“æ…¢æ”¾å¤§ */
            animation: ken-burns 20s ease-in-out infinite alternate;
        }
        @keyframes ken-burns {
            0% { transform: scale(1); }
            100% { transform: scale(1.15); }
        }

        /* 2. ç§‘æŠ€ç½‘æ ¼è¦†ç›– */
        .grid-overlay {
            position: absolute; inset: 0;
            background-image: 
                linear-gradient(rgba(16, 185, 129, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(16, 185, 129, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            z-index: 1;
            pointer-events: none;
        }
        /* æš—è§’ï¼šè®©å››å‘¨å˜é»‘ï¼Œèšç„¦ä¸­é—´ */
        .vignette {
            position: absolute; inset: 0;
            background: radial-gradient(circle at center, transparent 0%, #000 90%);
            z-index: 2;
        }

        /* ç»ç’ƒæ‹Ÿæ€ */
        .bg-glass { 
            background: rgba(15, 20, 25, 0.7); 
            backdrop-filter: blur(12px); 
            border: 1px solid rgba(255, 255, 255, 0.08); 
        }
        .sidebar-glass {
            background: rgba(5, 5, 5, 0.9);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        /* è·‘é©¬ç¯ */
        @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
        .ticker-wrap { overflow: hidden; white-space: nowrap; }
        .ticker-content { display: inline-block; animation: scroll 40s linear infinite; }
        
        @keyframes pulse-green { 0%, 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(16, 185, 129, 0); } }
        .live-dot { animation: pulse-green 2s infinite; }
        
        .page-section { display: none; opacity: 0; transition: opacity 0.3s ease-in-out; }
        .page-section.active { display: block; opacity: 1; }

        /* è¯­è¨€ä¸‹æ‹‰æ¡† */
        .lang-dropdown { display: none; }
        .lang-group:hover .lang-dropdown { display: block; }
    </style>
</head>
<body class="antialiased h-screen flex overflow-hidden text-sm">

    <!-- å·¦ä¾§è¾¹æ  -->
    <aside class="w-64 sidebar-glass flex-col hidden md:flex z-50">
        <div class="h-16 flex items-center px-6 border-b border-white/5">
            <div class="w-8 h-8 bg-emerald-600 rounded flex items-center justify-center text-white mr-3 font-bold shadow-lg shadow-emerald-500/20"><i class="fas fa-bolt"></i></div>
            <span class="font-bold text-lg text-white tracking-tight">OddsFlow</span>
        </div>
        <nav class="flex-1 p-4 space-y-1 overflow-y-auto">
            <p class="px-3 text-[10px] font-bold text-gray-500 uppercase tracking-wider mb-2 mt-2">Main Menu</p>
            <button onclick="switchTab('home')" class="nav-item w-full flex items-center px-3 py-2.5 rounded-lg text-gray-400 hover:bg-white/5 hover:text-white transition group"><i class="fas fa-home w-6 text-center mr-2 group-hover:text-emerald-400 transition"></i> <span data-i18n="menu_home">é¦–é¡µæ¦‚è§ˆ</span></button>
            <button onclick="switchTab('dashboard')" class="nav-item w-full flex items-center px-3 py-2.5 rounded-lg text-gray-400 hover:bg-white/5 hover:text-white transition group"><i class="fas fa-satellite-dish w-6 text-center mr-2 group-hover:text-red-400 transition animate-pulse"></i> <span data-i18n="menu_terminal">å®æ—¶ç»ˆç«¯</span> <span class="ml-auto bg-red-500/20 text-red-400 text-[10px] px-1.5 rounded">LIVE</span></button>
            <button onclick="switchTab('epl')" class="nav-item w-full flex items-center px-3 py-2.5 rounded-lg text-gray-400 hover:bg-white/5 hover:text-white transition group"><i class="fas fa-shield-alt w-6 text-center mr-2 group-hover:text-purple-400 transition"></i> <span data-i18n="menu_epl">è‹±è¶…å‰ç»</span></button>
            <p class="px-3 text-[10px] font-bold text-gray-500 uppercase tracking-wider mb-2 mt-6">Tools</p>
            <button onclick="openCalcModal()" class="w-full flex items-center px-3 py-2.5 rounded-lg text-gray-400 hover:bg-white/5 hover:text-white transition group"><i class="fas fa-calculator w-6 text-center mr-2"></i> <span data-i18n="menu_calc">å‡¯åˆ©è®¡ç®—å™¨</span></button>
            <button onclick="switchTab('guide')" class="nav-item w-full flex items-center px-3 py-2.5 rounded-lg text-gray-400 hover:bg-white/5 hover:text-white transition group"><i class="fas fa-book w-6 text-center mr-2"></i> <span data-i18n="menu_guide">ä½¿ç”¨æ•™ç¨‹</span></button>
        </nav>
    </aside>

    <!-- å³ä¾§ä¸»åŒºåŸŸ -->
    <div class="flex-1 flex flex-col h-full relative bg-black">
        
        <!-- ç§»åŠ¨ç«¯é¡¶éƒ¨æ  -->
        <div class="md:hidden h-14 bg-black border-b border-gray-800 flex items-center justify-between px-4 z-50 relative">
            <div class="flex items-center gap-2"><i class="fas fa-bolt text-emerald-500"></i><span class="font-bold text-white">OddsFlow</span></div>
            <button onclick="document.querySelector('aside').classList.toggle('hidden'); document.querySelector('aside').classList.toggle('absolute'); document.querySelector('aside').classList.toggle('h-full');" class="text-gray-400"><i class="fas fa-bars text-xl"></i></button>
        </div>

        <!-- é¡¶éƒ¨çŠ¶æ€æ¡ + è¯­è¨€åˆ‡æ¢ -->
        <header class="h-14 border-b border-white/5 bg-black/40 backdrop-blur flex items-center justify-between px-6 shrink-0 z-40 relative">
            <div class="flex items-center gap-2 text-xs text-gray-400">
                <span class="w-2 h-2 bg-emerald-500 rounded-full live-dot"></span>
                System: <span class="text-emerald-400">ONLINE</span>
            </div>
            <div class="flex items-center gap-4">
                
                <!-- ğŸŒ è¯­è¨€åˆ‡æ¢å™¨ -->
                <div class="relative lang-group group">
                    <button class="flex items-center gap-2 text-xs font-bold text-gray-300 hover:text-white px-3 py-1.5 rounded-lg border border-white/10 bg-white/5">
                        <i class="fas fa-globe"></i> <span id="current-lang">CN</span> <i class="fas fa-chevron-down text-[10px]"></i>
                    </button>
                    <div class="lang-dropdown absolute right-0 top-full mt-2 w-32 bg-[#1a1a1a] border border-gray-700 rounded-xl shadow-2xl overflow-hidden">
                        <div class="py-1">
                            <a href="#" onclick="setLang('zh')" class="block px-4 py-2 text-xs text-gray-300 hover:bg-white/10 hover:text-white">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</a>
                            <a href="#" onclick="setLang('en')" class="block px-4 py-2 text-xs text-gray-300 hover:bg-white/10 hover:text-white">ğŸ‡ºğŸ‡¸ English</a>
                            <a href="#" onclick="setLang('es')" class="block px-4 py-2 text-xs text-gray-300 hover:bg-white/10 hover:text-white">ğŸ‡ªğŸ‡¸ EspaÃ±ol</a>
                            <a href="#" onclick="setLang('pt')" class="block px-4 py-2 text-xs text-gray-300 hover:bg-white/10 hover:text-white">ğŸ‡§ğŸ‡· PortuguÃªs</a>
                            <a href="#" onclick="setLang('id')" class="block px-4 py-2 text-xs text-gray-300 hover:bg-white/10 hover:text-white">ğŸ‡®ğŸ‡© Indonesia</a>
                            <a href="#" onclick="setLang('ms')" class="block px-4 py-2 text-xs text-gray-300 hover:bg-white/10 hover:text-white">ğŸ‡²ğŸ‡¾ Melayu</a>
                        </div>
                    </div>
                </div>

                <a href="https://gslot16.com?ag=RS-c2VzYW1lcmFiYml0" target="_blank" class="group flex items-center gap-2 px-4 py-1.5 rounded-full bg-[#1a1a1a] border border-emerald-500/30 hover:border-emerald-500 text-xs font-bold text-gray-300 transition cursor-pointer">
                    <div class="w-2 h-2 rounded-full bg-red-500 animate-pulse group-hover:bg-emerald-500 transition"></div>
                    <span class="group-hover:text-white" data-i18n="btn_connect">è¿æ¥äº¤æ˜“è´¦æˆ·</span>
                </a>
            </div>
        </header>

        <!-- å†…å®¹æ»šåŠ¨åŒº -->
        <div class="flex-1 overflow-y-auto p-0 relative" id="main-view">
            
            <!-- HOME SECTION (è§†è§‰éœ‡æ’¼ç‰ˆ) -->
            <section id="home" class="page-section active min-h-full relative flex items-center justify-center overflow-hidden">
                <!-- èƒŒæ™¯ç‰¹æ•ˆä¸‰ä»¶å¥— -->
                <div class="hero-wrapper"><div class="hero-bg"></div></div>
                <div class="grid-overlay"></div>
                <div class="vignette"></div>

                <div class="relative z-10 text-center max-w-5xl mx-auto px-4 pt-10">
                    <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-xs font-bold mb-8 backdrop-blur-md">
                        <i class="fas fa-robot"></i> v14.1 Global System
                    </div>
                    
                    <h1 class="text-5xl md:text-7xl font-black text-white mb-6 tracking-tighter leading-tight drop-shadow-2xl">
                        <span data-i18n="hero_h1_1">æ•°æ®é©±åŠ¨</span><br>
                        <span class="text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 via-cyan-300 to-blue-500" data-i18n="hero_h1_2">ç²¾å‡†è·åˆ©ã€‚</span>
                    </h1>
                    
                    <p class="text-lg text-gray-300 mb-10 max-w-2xl mx-auto leading-relaxed font-light" data-i18n="hero_sub">
                        è¿™ä¸æ˜¯èµŒåšï¼Œè¿™æ˜¯åŸºäº N8N è‡ªåŠ¨åŒ–ä¸ Supabase å¤§æ•°æ®çš„ <strong class="text-white">ä½“è‚²å¥—åˆ©äº¤æ˜“</strong>ã€‚
                    </p>
                    
                    <div class="flex flex-col sm:flex-row justify-center gap-4">
                        <button onclick="switchTab('dashboard')" class="px-8 py-4 bg-white text-black font-bold rounded-xl hover:bg-emerald-400 transition shadow-[0_0_30px_rgba(255,255,255,0.2)] flex items-center justify-center gap-2 transform hover:-translate-y-1">
                            <i class="fas fa-rocket"></i> <span data-i18n="btn_start">å¯åŠ¨ç›‘æ§</span>
                        </button>
                        <button onclick="openCalcModal()" class="px-8 py-4 bg-white/5 border border-white/10 text-white font-bold rounded-xl hover:bg-white/10 transition flex items-center justify-center gap-2 backdrop-blur-md">
                            <i class="fas fa-calculator"></i> <span data-i18n="btn_calc">å‡¯åˆ©è®¡ç®—å™¨</span>
                        </button>
                    </div>

                    <!-- åº•éƒ¨æ•°æ®æ¡ -->
                    <div class="mt-20 flex justify-center gap-8 md:gap-16 opacity-80">
                        <div class="text-center"><div class="text-2xl font-bold text-white">532</div><div class="text-[10px] text-gray-500 uppercase">Matches</div></div>
                        <div class="text-center"><div class="text-2xl font-bold text-white">24/7</div><div class="text-[10px] text-gray-500 uppercase">Uptime</div></div>
                        <div class="text-center"><div class="text-2xl font-bold text-white">2s</div><div class="text-[10px] text-gray-500 uppercase">Latency</div></div>
                    </div>
                </div>
            </section>

            <!-- DASHBOARD SECTION -->
            <section id="dashboard" class="page-section pt-10 px-4">
                <div class="text-center mb-8 relative z-10">
                    <h2 class="text-2xl font-bold text-white mb-2" data-i18n="dash_title">å®æ—¶ç›‘æ§ç»ˆç«¯</h2>
                    <p class="text-xs text-gray-500">Live Data Feed from Supabase</p>
                </div>
                <div class="max-w-4xl mx-auto grid gap-4 relative z-10" id="match-container">
                    <div class="text-center py-20 text-gray-500 animate-pulse">Connecting to Satellite...</div>
                </div>
            </section>

            <!-- EPL SECTION -->
            <section id="epl" class="page-section pt-10 px-4">
                <div class="text-center mb-8 relative z-10">
                    <h2 class="text-2xl font-bold text-purple-400" data-i18n="epl_title">è‹±è¶…èµ›äº‹å‰ç»</h2>
                </div>
                <div class="max-w-4xl mx-auto grid md:grid-cols-2 gap-4 relative z-10" id="epl-container">
                    <div class="text-center py-20 text-gray-500 col-span-2">Loading...</div>
                </div>
            </section>

            <!-- PRICING SECTION -->
            <section id="pricing" class="page-section pt-10 px-4">
                <div class="max-w-4xl mx-auto text-center relative z-10">
                    <h2 class="text-3xl font-bold mb-4" data-i18n="price_title">è®¢é˜…ä»·æ ¼</h2>
                    <div class="bg-gradient-to-b from-gray-800 to-black border border-emerald-500 p-8 rounded-3xl max-w-sm mx-auto shadow-2xl shadow-emerald-900/20">
                        <div class="text-emerald-400 font-bold mb-2">PRO TRADER</div>
                        <div class="text-5xl font-bold text-white mb-2">RM 68<span class="text-lg text-gray-500">/mo</span></div>
                        <a href="https://t.me/footballscbet_bot" target="_blank" class="block w-full py-4 bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl font-bold mt-6" data-i18n="btn_sub">ç«‹å³è®¢é˜…</a>
                    </div>
                </div>
            </section>

            <!-- GUIDE SECTION -->
            <section id="guide" class="page-section pt-10 px-4">
                <div class="max-w-3xl mx-auto relative z-10">
                    <h2 class="text-2xl font-bold mb-6 text-center" data-i18n="guide_title">ä½¿ç”¨æ•™ç¨‹</h2>
                    <div class="space-y-4">
                        <div class="bg-glass p-6 rounded-xl">
                            <h3 class="text-emerald-400 font-bold mb-2">1. Pressure Index</h3>
                            <p class="text-gray-400 text-sm" data-i18n="guide_text_1">å½“å‹åŠ›æ¡è¶…è¿‡ 75% æ—¶ï¼Œè¡¨ç¤ºä¸€æ–¹æ­£åœ¨ç–¯ç‹‚è¿›æ”»ã€‚</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- å¼¹çª—ï¼šè®¡ç®—å™¨ -->
    <div id="calc-modal" class="fixed inset-0 z-[100] hidden">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" onclick="document.getElementById('calc-modal').classList.add('hidden')"></div>
        <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
            <div class="bg-[#1a1a1a] rounded-xl w-80 p-6 border border-gray-700 pointer-events-auto shadow-2xl">
                <h3 class="font-bold text-white mb-4" data-i18n="calc_title">å‡¯åˆ©è®¡ç®—å™¨</h3>
                <div class="space-y-3 text-xs">
                    <div><label class="text-gray-500 block mb-1">Win %</label><input type="range" id="kelly-win" min="1" max="99" value="55" class="w-full accent-emerald-500 h-2 bg-gray-700 rounded-lg appearance-none"><span class="text-emerald-400 font-bold block text-right" id="kelly-win-display">55%</span></div>
                    <div><label class="text-gray-500 block mb-1">Odds</label><input type="number" id="kelly-odds" value="2.00" class="input-dark w-full p-2 bg-black border border-gray-600 rounded text-white" oninput="calcKelly()"></div>
                    <div><label class="text-gray-500 block mb-1">Bankroll</label><input type="number" id="kelly-bank" value="1000" class="input-dark w-full p-2 bg-black border border-gray-600 rounded text-white" oninput="calcKelly()"></div>
                    <div id="kelly-result" class="mt-4 text-center font-mono text-emerald-400 font-bold text-lg">$100</div>
                </div>
            </div>
        </div>
    </div>

    <!-- å¼¹çª—ï¼šæ¯”èµ›è¯¦æƒ… -->
    <div id="match-modal" class="fixed inset-0 z-[100] hidden">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" onclick="closeModal()"></div>
        <div class="absolute inset-x-0 bottom-0 md:inset-0 md:flex md:items-center md:justify-center pointer-events-none">
            <div class="bg-[#0f0f0f] md:rounded-2xl md:max-w-xl w-full p-6 border border-gray-800 shadow-2xl pointer-events-auto" id="modal-panel">
                <div id="modal-content"></div>
                <button onclick="closeModal()" class="mt-6 w-full bg-gray-800 text-white py-3 rounded-xl font-bold hover:bg-gray-700">Close</button>
            </div>
        </div>
    </div>

    <script>
        // --- 1. å¤šè¯­è¨€å­—å…¸ ---
        const translations = {
            zh: {
                menu_home: "é¦–é¡µæ¦‚è§ˆ", menu_terminal: "å®æ—¶ç»ˆç«¯", menu_epl: "è‹±è¶…å‰ç»", menu_calc: "å‡¯åˆ©è®¡ç®—å™¨", menu_guide: "ä½¿ç”¨æ•™ç¨‹",
                hero_h1_1: "æ•°æ®é©±åŠ¨", hero_h1_2: "ç²¾å‡†è·åˆ©ã€‚", hero_sub: "è¿™ä¸æ˜¯èµŒåšï¼Œè¿™æ˜¯åŸºäº N8N è‡ªåŠ¨åŒ–ä¸ Supabase å¤§æ•°æ®çš„ä½“è‚²å¥—åˆ©äº¤æ˜“ã€‚",
                btn_start: "å¯åŠ¨ç›‘æ§", btn_calc: "å‡¯åˆ©è®¡ç®—å™¨", btn_connect: "è¿æ¥äº¤æ˜“è´¦æˆ·",
                dash_title: "å®æ—¶ç›‘æ§ç»ˆç«¯", epl_title: "è‹±è¶…èµ›äº‹å‰ç»", price_title: "è®¢é˜…ä»·æ ¼", guide_title: "ä½¿ç”¨æ•™ç¨‹",
                guide_text_1: "å½“å‹åŠ›æ¡è¶…è¿‡ 75% æ—¶ï¼Œè¡¨ç¤ºä¸€æ–¹æ­£åœ¨ç–¯ç‹‚è¿›æ”»ã€‚", btn_sub: "ç«‹å³è®¢é˜…", calc_title: "å‡¯åˆ©è®¡ç®—å™¨"
            },
            en: {
                menu_home: "Home", menu_terminal: "Live Terminal", menu_epl: "EPL Data", menu_calc: "Kelly Calc", menu_guide: "Guide",
                hero_h1_1: "Data Driven,", hero_h1_2: "Precision Profit.", hero_sub: "Stop gambling. Start arbitrage trading powered by N8N & Supabase big data.",
                btn_start: "Launch System", btn_calc: "Kelly Calc", btn_connect: "Connect Wallet",
                dash_title: "Live Monitor", epl_title: "EPL Insights", price_title: "Pricing", guide_title: "User Guide",
                guide_text_1: "When pressure bar exceeds 75%, one side is dominating.", btn_sub: "Subscribe Now", calc_title: "Kelly Calculator"
            },
            es: {
                menu_home: "Inicio", menu_terminal: "Terminal en Vivo", menu_epl: "Datos EPL", menu_calc: "Calculadora Kelly", menu_guide: "GuÃ­a",
                hero_h1_1: "Impulsado por Datos,", hero_h1_2: "Beneficio Preciso.", hero_sub: "Deja de apostar. Empieza a operar con arbitraje deportivo impulsado por N8N.",
                btn_start: "Iniciar Sistema", btn_calc: "Calculadora", btn_connect: "Conectar Cuenta",
                dash_title: "Monitor en Vivo", epl_title: "AnÃ¡lisis EPL", price_title: "Precios", guide_title: "GuÃ­a de Usuario",
                guide_text_1: "Cuando la barra de presiÃ³n supera el 75%, un lado domina.", btn_sub: "Suscribirse", calc_title: "Calculadora Kelly"
            },
            pt: {
                menu_home: "InÃ­cio", menu_terminal: "Terminal Ao Vivo", menu_epl: "Dados EPL", menu_calc: "Calc Kelly", menu_guide: "Guia",
                hero_h1_1: "Guiado por Dados,", hero_h1_2: "Lucro Preciso.", hero_sub: "Pare de apostar. Comece a negociar com arbitragem esportiva via N8N.",
                btn_start: "LanÃ§ar Sistema", btn_calc: "Calculadora", btn_connect: "Conectar Conta",
                dash_title: "Monitor Ao Vivo", epl_title: "Insights EPL", price_title: "PreÃ§os", guide_title: "Guia do UsuÃ¡rio",
                guide_text_1: "Quando a pressÃ£o excede 75%, um lado estÃ¡ dominando.", btn_sub: "Inscrever-se", calc_title: "Calculadora Kelly"
            },
            id: {
                menu_home: "Beranda", menu_terminal: "Terminal Langsung", menu_epl: "Data EPL", menu_calc: "Kalkulator Kelly", menu_guide: "Panduan",
                hero_h1_1: "Berbasis Data,", hero_h1_2: "Keuntungan Tepat.", hero_sub: "Berhenti berjudi. Mulai trading arbitrase olahraga didukung oleh N8N.",
                btn_start: "Mulai Sistem", btn_calc: "Kalkulator", btn_connect: "Hubungkan Akun",
                dash_title: "Monitor Langsung", epl_title: "Wawasan EPL", price_title: "Harga", guide_title: "Panduan Pengguna",
                guide_text_1: "Ketika tekanan melebihi 75%, satu sisi mendominasi.", btn_sub: "Berlangganan", calc_title: "Kalkulator Kelly"
            },
            ms: {
                menu_home: "Utama", menu_terminal: "Terminal Langsung", menu_epl: "Data EPL", menu_calc: "Kira Kelly", menu_guide: "Panduan",
                hero_h1_1: "Dipacu Data,", hero_h1_2: "Untung Tepat.", hero_sub: "Berhenti berjudi. Mula berdagang arbitraj sukan dikuasakan oleh N8N.",
                btn_start: "Lancar Sistem", btn_calc: "Kalkulator", btn_connect: "Sambung Akaun",
                dash_title: "Monitor Langsung", epl_title: "Wawasan EPL", price_title: "Harga", guide_title: "Panduan Pengguna",
                guide_text_1: "Apabila tekanan melebihi 75%, satu pihak mendominasi.", btn_sub: "Langgan Sekarang", calc_title: "Kalkulator Kelly"
            }
        };

        function setLang(lang) {
            const codes = { 'zh': 'CN', 'en': 'EN', 'es': 'ES', 'pt': 'BR', 'id': 'ID', 'ms': 'MY' };
            document.getElementById('current-lang').innerText = codes[lang];
            
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang][key]) el.innerText = translations[lang][key];
            });
        }

        // --- 2. é…ç½® ---
        const SUPABASE_URL = 'https://ncubbsgzebbmoqslyukd.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_sVNMF9y0NlYxSqjqKqwySw_b1DJyEdg';
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
        
        let liveData = [];
        let eplData = [];

        const adsData = [
            { type: "ad", content: { brand: "ğŸ‘‘ å®˜æ–¹æ¨è: GSlot16", title: "å…¨ç½‘æœ€ç¨³è€è™æœº/çœŸäººè§†è®¯å¹³å°", desc: "å¤§é¢æ— å¿§ï¼Œç§’å……ç§’æã€‚", btn_text: "è¿›å…¥ GSlot16 å®˜ç½‘", link: "https://gslot16.com?ag=RS-c2VzYW1lcmFiYml0" } },
            { type: "ad", content: { brand: "âš½ BK8 äºšæ´²ç¬¬ä¸€ä½“è‚²", title: "OddsFlow ç‹¬å®¶åˆä½œä¼™ä¼´", desc: "è‹±è¶…å®˜æ–¹èµåŠ©å•†ã€‚ä½“è‚²èµ›äº‹èµ”ç‡æœ€é«˜ã€‚", btn_text: "é¢†å– BK8 çº¢åˆ©", link: "https://www.bk8.com/" } }
        ];

        // --- 3. é¡µé¢æ§åˆ¶ ---
        function switchTab(tabId){
            document.querySelectorAll('.page-section').forEach(el => el.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            // æ›´æ–°ä¾§è¾¹æ æ ·å¼ (ç•¥ç®€åŒ–)
            if(tabId === 'dashboard') fetchLiveMatches();
            if(tabId === 'epl') fetchEPL();
        }
        function openCalcModal() { document.getElementById('calc-modal').classList.remove('hidden'); }
        function closeModal() { document.getElementById('match-modal').classList.add('hidden'); }
        
        // å‡¯åˆ©è®¡ç®—å™¨é€»è¾‘
        const kellyWinSlider = document.getElementById('kelly-win');
        kellyWinSlider.addEventListener('input', (e) => {
            document.getElementById('kelly-win-display').innerText = e.target.value + '%';
            calcKelly();
        });
        function calcKelly() {
            const win = parseFloat(document.getElementById('kelly-win').value) / 100;
            const odds = parseFloat(document.getElementById('kelly-odds').value);
            const bank = parseFloat(document.getElementById('kelly-bank').value);
            if(odds <= 1) return;
            const b = odds - 1;
            const f = ((b * win) - (1 - win)) / b;
            const resultEl = document.getElementById('kelly-result');
            if (f > 0) resultEl.innerText = '$' + (bank * f).toFixed(0);
            else resultEl.innerText = "$0 (No Bet)";
        }

        // --- 4. æ•°æ®æŠ“å– ---
        async function fetchLiveMatches() {
            const container = document.getElementById('match-container');
            try {
                const { data, error } = await supabase.from('live_signals').select('*').order('created_at', { ascending: false }).limit(20);
                if(data && data.length > 0) {
                    liveData = [];
                    data.forEach((m, i) => {
                        liveData.push({ type: 'match', result: m });
                        if(i===0) liveData.push(adsData[0]);
                        if(i===2) liveData.push(adsData[1]);
                    });
                    renderLiveList();
                } else { container.innerHTML = '<div class="text-center text-gray-500 py-10">Scanning...</div>'; }
            } catch(e) { console.error(e); }
        }

        function renderLiveList() {
            const container = document.getElementById('match-container');
            let html = '';
            liveData.forEach((item, index) => {
                if(item.type === 'ad') {
                    html += `<div class="bg-gradient-to-r from-yellow-900/40 to-black p-4 rounded-xl border border-yellow-500/50 flex justify-between items-center mb-2"><div class="flex items-center gap-3"><div class="text-2xl">ğŸ</div><div><div class="text-yellow-400 font-bold text-xs">${item.content.brand}</div><div class="text-white font-bold text-sm">${item.content.desc}</div></div></div><a href="${item.content.link}" target="_blank" class="bg-yellow-500 text-black px-3 py-1.5 rounded text-xs font-bold">GO</a></div>`;
                    return;
                }
                const m = item.result;
                const pVal = parseInt(m.pressure_val) || 50;
                html += `<div onclick="openLiveModal(${index})" class="bg-glass p-4 rounded-xl border-l-2 border-emerald-500 cursor-pointer hover:bg-white/5 transition mb-2"><div class="flex justify-between text-[10px] text-gray-400 mb-2"><span>${m.league} â€¢ ${m.time}'</span><span class="text-emerald-400">Live Signal</span></div><div class="flex justify-between items-center mb-2"><span class="font-bold text-white w-1/3 truncate text-right">${m.home_team}</span><span class="bg-black/50 px-2 py-0.5 rounded text-white font-mono mx-2">${m.score}</span><span class="font-bold text-white w-1/3 truncate text-left">${m.away_team}</span></div><div class="h-1.5 bg-gray-800 rounded-full overflow-hidden flex"><div style="width: ${pVal}%" class="bg-blue-500 h-full"></div><div style="width: ${100-pVal}%" class="bg-red-500 h-full"></div></div></div>`;
            });
            container.innerHTML = html;
        }

        // è‹±è¶…æ•°æ® (Mock + Real)
        async function fetchEPL() {
            const container = document.getElementById('epl-container');
            try {
                const { data } = await supabase.from('upcoming_epl').select('*').order('created_at', { ascending: false });
                eplData = (data && data.length > 0) ? data : [{ start_date: "2025-11-22T12:30:00Z", home_team: "Burnley", away_team: "Chelsea", venue: "Turf Moor", home_logo: "https://cdn.opticodds.com/team-logos/soccer/3763.png", away_logo: "https://cdn.opticodds.com/team-logos/soccer/4009.png", win_prob_home: 14, win_prob_draw: 21, win_prob_away: 65 }];
                let html = '';
                eplData.forEach((m, index) => {
                     html += `<div onclick="openEPLModal(${index})" class="bg-[#1a1a1a] p-4 rounded-xl border border-purple-900/30 cursor-pointer hover:border-purple-500 transition relative overflow-hidden"><div class="absolute top-0 left-0 bg-purple-600 text-[8px] px-2 py-0.5 text-white rounded-br">EPL</div><div class="flex justify-between items-center mt-2"><div class="text-center"><img src="${m.home_logo}" class="w-8 h-8 mx-auto mb-1"><div class="text-xs text-white">${m.home_team}</div></div><div class="text-gray-600 font-mono font-bold">VS</div><div class="text-center"><img src="${m.away_logo}" class="w-8 h-8 mx-auto mb-1"><div class="text-xs text-white">${m.away_team}</div></div></div></div>`;
                });
                container.innerHTML = html;
            } catch(e) { console.error(e); }
        }

        function openLiveModal(i) {
            const m = liveData[i].result;
            document.getElementById('modal-content').innerHTML = `<div class="text-center"><div class="text-emerald-400 font-bold mb-2">AI æ´å¯Ÿ</div><p class="text-gray-300 text-sm">${m.recommendation}</p></div>`;
            document.getElementById('match-modal').classList.remove('hidden');
        }
        function openEPLModal(i) {
            const m = eplData[i];
            const prob = { home: m.win_prob_home || 33, draw: m.win_prob_draw || 33, away: m.win_prob_away || 34 };
            document.getElementById('modal-content').innerHTML = `<div class="text-center mb-4"><div class="text-purple-400 font-bold text-xs mb-2">WIN PROBABILITY</div><div class="flex h-4 rounded-full overflow-hidden"><div style="width: ${prob.home}%" class="bg-red-600 text-[8px] text-white flex items-center justify-center">${prob.home}%</div><div style="width: ${prob.draw}%" class="bg-gray-600"></div><div style="width: ${prob.away}%" class="bg-blue-600 text-[8px] text-white flex items-center justify-center">${prob.away}%</div></div></div>`;
            document.getElementById('match-modal').classList.remove('hidden');
        }

        // åˆå§‹åŒ–
        switchTab('home');
        calcKelly();
    </script>
</body>
</html>
