<!DOCTYPE html>
<html lang="zh-CN" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OddsFlow AI - æ™ºèƒ½è¶³çƒäº¤æ˜“ç»ˆç«¯</title>
    
    <meta name="description" content="OddsFlow AI - å®æ—¶è¶³çƒèµ”ç‡ç›‘æ§ä¸è‹±è¶…å¤§æ•°æ®åˆ†æã€‚">
    <meta property="og:site_name" content="OddsFlow AI">
    
    <!-- æ ¸å¿ƒ SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #050505; color: #e5e7eb; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* 1. éœ‡æ’¼èƒŒæ™¯ (Cinematic Background) */
        .hero-bg {
            background-image: url('https://images.unsplash.com/photo-1522770179533-24471fcdba45?q=80&w=2600&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            background-attachment: fixed; /* è§†å·®æ»šåŠ¨æ•ˆæœ */
        }
        .grid-overlay {
            background-image: linear-gradient(rgba(16, 185, 129, 0.05) 1px, transparent 1px),
            linear-gradient(90deg, rgba(16, 185, 129, 0.05) 1px, transparent 1px);
            background-size: 40px 40px;
        }
        
        /* ç»ç’ƒæ‹Ÿæ€å¢å¼º */
        .bg-glass { 
            background: rgba(15, 20, 25, 0.7); 
            backdrop-filter: blur(20px); 
            border: 1px solid rgba(255, 255, 255, 0.08); 
            box-shadow: 0 20px 50px -12px rgba(0, 0, 0, 0.8);
        }
        
        /* åŠ¨ç”» */
        @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
        .ticker-wrap { overflow: hidden; white-space: nowrap; }
        .ticker-content { display: inline-block; animation: scroll 40s linear infinite; }
        
        @keyframes pulse-green { 0%, 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(16, 185, 129, 0); } }
        .live-dot { animation: pulse-green 2s infinite; }
        
        /* è¾“å…¥æ¡†ç¾åŒ– */
        .input-dark {
            background: #0a0a0a;
            border: 1px solid #333;
            color: white;
            transition: all 0.3s;
        }
        .input-dark:focus {
            border-color: #10b981;
            box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.2);
            outline: none;
        }

        .page-section { display: none; opacity: 0; transition: opacity 0.3s ease-in-out; }
        .page-section.active { display: block; opacity: 1; }
    </style>
</head>
<body class="antialiased h-screen flex flex-col overflow-hidden selection:bg-emerald-500 selection:text-black">

    <!-- 1. è·‘é©¬ç¯ -->
    <div class="bg-black border-b border-emerald-900/50 h-8 flex items-center overflow-hidden shrink-0 z-50 relative">
        <div class="ticker-wrap">
            <div class="ticker-content text-[10px] font-mono flex gap-10 text-emerald-400">
                <span>ğŸš€ SYSTEM: ONLINE</span>
                <span>ğŸ“Š SCANNING: 532 MATCHES</span>
                <span>ğŸ’° VALUE FOUND: Real Madrid (1.85)</span>
                <span>ğŸš¨ ALERT: Heavy Load on Asian Market</span>
                <span>ğŸš€ SYSTEM: ONLINE</span>
                <span>ğŸ“Š SCANNING: 532 MATCHES</span>
                <span>ğŸ’° VALUE FOUND: Real Madrid (1.85)</span>
                <span>ğŸš¨ ALERT: Heavy Load on Asian Market</span>
            </div>
        </div>
    </div>

    <!-- 2. å¯¼èˆªæ  -->
    <nav class="w-full h-16 border-b border-white/10 bg-black/60 backdrop-blur-md flex items-center justify-between px-6 z-50 shrink-0 absolute top-8 w-full">
        <div class="flex items-center gap-3 cursor-pointer" onclick="location.reload()">
            <div class="w-9 h-9 bg-gradient-to-br from-emerald-500 to-emerald-700 rounded-lg flex items-center justify-center text-black font-bold shadow-[0_0_15px_rgba(16,185,129,0.5)] border border-white/20">
                <i class="fas fa-bolt text-lg"></i>
            </div>
            <span class="font-bold text-xl tracking-tight text-white font-mono">OddsFlow<span class="text-emerald-500">.ai</span></span>
        </div>
        
        <!-- æ¡Œé¢èœå• -->
        <div class="hidden md:flex items-center gap-1 text-sm font-medium text-gray-400 bg-black/40 p-1 rounded-xl border border-white/5">
            <button onclick="switchTab('home')" class="nav-btn text-white bg-white/10 px-4 py-1.5 rounded-lg transition" data-target="home">é¦–é¡µ</button>
            <button onclick="switchTab('dashboard')" class="nav-btn px-4 py-1.5 rounded-lg hover:text-white transition" data-target="dashboard">å®æ—¶ç»ˆç«¯</button>
            <button onclick="switchTab('tools')" class="nav-btn px-4 py-1.5 rounded-lg hover:text-white transition" data-target="tools">è®¡ç®—å·¥å…·</button>
            <button onclick="switchTab('epl')" class="nav-btn px-4 py-1.5 rounded-lg hover:text-white transition text-purple-400 font-bold" data-target="epl">è‹±è¶…æ•°æ®</button>
        </div>

        <!-- å³ä¸Šè§’çŠ¶æ€ (ä¿®æ”¹ä¸ºè¿æ¥è´¦æˆ·) -->
        <div class="flex items-center gap-4">
            <!-- è¿™é‡Œçš„é“¾æ¥æ”¹æˆä½ çš„ GSlot é“¾æ¥ -->
            <a href="https://gslot16.com?ag=RS-c2VzYW1lcmFiYml0" target="_blank" class="group flex items-center gap-2 px-4 py-2 rounded-full bg-[#1a1a1a] border border-emerald-500/30 hover:border-emerald-500 text-xs font-bold text-gray-300 transition cursor-pointer">
                <div class="w-2 h-2 rounded-full bg-red-500 animate-pulse group-hover:bg-emerald-500 transition"></div>
                <span class="group-hover:text-white">è¿æ¥äº¤æ˜“è´¦æˆ·</span>
            </a>
        </div>
    </nav>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="flex-1 overflow-y-auto relative w-full h-full" id="main-content">
        
        <!-- =========================================
             HOME: è§†è§‰éœ‡æ’¼ç‰ˆ
        ========================================== -->
        <section id="home" class="page-section active min-h-full relative flex items-center justify-center overflow-hidden">
            <!-- èƒŒæ™¯ç»„åˆ -->
            <div class="absolute inset-0 hero-bg opacity-40"></div>
            <div class="absolute inset-0 grid-overlay opacity-20"></div>
            <div class="absolute inset-0 bg-gradient-to-t from-black via-black/80 to-transparent"></div>
            
            <!-- åŠ¨æ€å…‰æ™• -->
            <div class="absolute top-1/3 left-1/2 -translate-x-1/2 w-[600px] h-[600px] bg-emerald-500/20 rounded-full blur-[150px] pointer-events-none"></div>

            <div class="relative z-10 text-center max-w-4xl mx-auto px-4 pt-20">
                <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-xs font-bold mb-8 backdrop-blur-md">
                    <i class="fas fa-code-branch"></i> v14.0 ç³»ç»Ÿåœ¨çº¿
                </div>
                
                <h1 class="text-6xl md:text-8xl font-black text-white mb-6 tracking-tighter leading-tight drop-shadow-2xl">
                    æ•°æ®é©±åŠ¨<br>
                    <span class="text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 via-cyan-300 to-blue-500">ç²¾å‡†è·åˆ©ã€‚</span>
                </h1>
                
                <p class="text-lg text-gray-400 mb-10 max-w-xl mx-auto leading-relaxed">
                    è¿™ä¸æ˜¯èµŒåšï¼Œè¿™æ˜¯åŸºäº N8N è‡ªåŠ¨åŒ–ä¸ Supabase å¤§æ•°æ®çš„ <strong class="text-white">ä½“è‚²å¥—åˆ©äº¤æ˜“</strong>ã€‚
                </p>
                
                <div class="flex flex-col sm:flex-row justify-center gap-4">
                    <button onclick="switchTab('dashboard')" class="px-8 py-4 bg-white text-black font-bold rounded-xl hover:bg-emerald-400 transition shadow-[0_0_30px_rgba(255,255,255,0.2)] flex items-center justify-center gap-2 transform hover:-translate-y-1">
                        <i class="fas fa-rocket"></i> å¯åŠ¨ç›‘æ§
                    </button>
                    <button onclick="switchTab('tools')" class="px-8 py-4 bg-white/5 border border-white/10 text-white font-bold rounded-xl hover:bg-white/10 transition flex items-center justify-center gap-2 backdrop-blur-md">
                        <i class="fas fa-calculator"></i> å‡¯åˆ©è®¡ç®—å™¨
                    </button>
                </div>

                <!-- åº•éƒ¨æ•°æ®æ¡ -->
                <div class="mt-20 flex justify-center gap-8 md:gap-16 opacity-70 grayscale hover:grayscale-0 transition duration-500">
                    <div class="text-center"><div class="text-2xl font-bold text-white">532</div><div class="text-[10px] text-gray-500 uppercase">Matches</div></div>
                    <div class="text-center"><div class="text-2xl font-bold text-white">24/7</div><div class="text-[10px] text-gray-500 uppercase">Uptime</div></div>
                    <div class="text-center"><div class="text-2xl font-bold text-white">2s</div><div class="text-[10px] text-gray-500 uppercase">Latency</div></div>
                </div>
            </div>
        </section>

        <!-- =========================================
             TOOLS: æ ¸å¿ƒè®¡ç®—å·¥å…·ç®± (æ¨¡ä»¿ Mysports)
        ========================================== -->
        <section id="tools" class="page-section pt-24 pb-20 px-4">
            <div class="max-w-5xl mx-auto">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold text-white mb-2">äº¤æ˜“å‘˜å·¥å…·ç®±</h2>
                    <p class="text-gray-500 text-sm">ä¸ä»…æä¾›ä¿¡å·ï¼Œè¿˜æä¾›èµ„é‡‘ç®¡ç†ç­–ç•¥</p>
                </div>

                <!-- å·¥å…·åˆ‡æ¢ Tab -->
                <div class="flex justify-center gap-2 mb-8">
                    <button onclick="switchTool('kelly')" class="tool-tab active px-6 py-2 rounded-full text-sm font-bold bg-emerald-600 text-white transition">å‡¯åˆ©å…¬å¼</button>
                    <button onclick="switchTool('arb')" class="tool-tab px-6 py-2 rounded-full text-sm font-bold bg-gray-800 text-gray-400 hover:text-white transition">å¥—åˆ©è®¡ç®—</button>
                    <button onclick="switchTool('fair')" class="tool-tab px-6 py-2 rounded-full text-sm font-bold bg-gray-800 text-gray-400 hover:text-white transition">å»æ°´èµ”ç‡</button>
                </div>

                <!-- 1. å‡¯åˆ©å…¬å¼ (Kelly) -->
                <div id="tool-kelly" class="tool-content bg-glass p-8 rounded-2xl max-w-3xl mx-auto">
                    <div class="grid md:grid-cols-2 gap-8">
                        <div class="space-y-6">
                            <div>
                                <label class="text-xs text-gray-400 uppercase font-bold mb-2 block">ä½ çš„èƒœç‡é¢„ä¼° (Win %)</label>
                                <div class="flex items-center gap-4">
                                    <input type="range" id="kelly-win" min="1" max="99" value="55" class="w-full accent-emerald-500 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer">
                                    <span class="text-emerald-400 font-mono font-bold w-12 text-right" id="kelly-win-display">55%</span>
                                </div>
                            </div>
                            <div>
                                <label class="text-xs text-gray-400 uppercase font-bold mb-2 block">èµ”ç‡ (Odds)</label>
                                <input type="number" id="kelly-odds" value="2.00" step="0.01" class="input-dark w-full p-3 rounded-lg font-mono text-lg" oninput="calcKelly()">
                            </div>
                            <div>
                                <label class="text-xs text-gray-400 uppercase font-bold mb-2 block">æ€»æœ¬é‡‘ (Bankroll)</label>
                                <input type="number" id="kelly-bank" value="1000" class="input-dark w-full p-3 rounded-lg font-mono text-lg" oninput="calcKelly()">
                            </div>
                        </div>
                        <div class="bg-black/40 rounded-xl p-6 flex flex-col justify-center items-center border border-white/5 text-center">
                            <div class="text-gray-500 text-xs uppercase mb-2">å»ºè®®ä¸‹æ³¨é‡‘é¢</div>
                            <div class="text-5xl font-black text-white mb-2 tracking-tight" id="kelly-result">$100</div>
                            <div class="text-sm text-emerald-400 font-bold" id="kelly-pct">(10.00% ä»“ä½)</div>
                            <div class="mt-6 text-[10px] text-gray-600">
                                * å‡¯åˆ©å…¬å¼èƒ½æœ€å¤§åŒ–é•¿æœŸå¤åˆ©å¢é•¿ï¼Œé¿å…ç ´äº§é£é™©ã€‚
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2. å¥—åˆ©è®¡ç®— (Arb) -->
                <div id="tool-arb" class="tool-content hidden bg-glass p-8 rounded-2xl max-w-3xl mx-auto">
                    <div class="grid md:grid-cols-2 gap-8">
                        <div class="space-y-4">
                            <div class="p-4 border border-blue-500/30 bg-blue-900/10 rounded-xl">
                                <label class="text-blue-400 text-xs font-bold block mb-1">å¹³å° A èµ”ç‡</label>
                                <input type="number" id="arb-odds-1" value="2.10" class="input-dark w-full p-2 rounded font-mono" oninput="calcArb()">
                            </div>
                            <div class="p-4 border border-red-500/30 bg-red-900/10 rounded-xl">
                                <label class="text-red-400 text-xs font-bold block mb-1">å¹³å° B èµ”ç‡</label>
                                <input type="number" id="arb-odds-2" value="2.05" class="input-dark w-full p-2 rounded font-mono" oninput="calcArb()">
                            </div>
                            <div class="p-4 bg-gray-800 rounded-xl">
                                <label class="text-gray-400 text-xs font-bold block mb-1">æ€»æŠ•å…¥é‡‘é¢</label>
                                <input type="number" id="arb-total" value="1000" class="input-dark w-full p-2 rounded font-mono" oninput="calcArb()">
                            </div>
                        </div>
                        <div class="flex flex-col justify-center space-y-4">
                            <div class="text-center">
                                <div class="text-gray-500 text-xs uppercase">å¥—åˆ©åˆ©æ¶¦ç‡</div>
                                <div class="text-4xl font-bold text-white" id="arb-profit-pct">3.73%</div>
                            </div>
                            <div class="bg-black/40 p-4 rounded-lg text-sm space-y-2 font-mono">
                                <div class="flex justify-between"><span>å¹³å° A ä¸‹æ³¨:</span> <span class="text-blue-400" id="arb-stake-1">--</span></div>
                                <div class="flex justify-between"><span>å¹³å° B ä¸‹æ³¨:</span> <span class="text-red-400" id="arb-stake-2">--</span></div>
                                <div class="border-t border-gray-700 my-2 pt-2 flex justify-between font-bold text-emerald-400"><span>å‡€èµšåˆ©æ¶¦:</span> <span id="arb-profit-val">--</span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 3. å»æ°´è®¡ç®— (Fair) -->
                <div id="tool-fair" class="tool-content hidden bg-glass p-8 rounded-2xl max-w-2xl mx-auto text-center">
                    <h3 class="text-white font-bold mb-6">è®¡ç®—åº„å®¶æŠ½æ°´ & çœŸå®æ¦‚ç‡</h3>
                    <div class="flex gap-4 justify-center mb-8">
                        <input type="number" id="fair-o1" value="1.90" class="input-dark w-32 p-3 text-center rounded text-xl font-mono" placeholder="ä¸»èƒœ">
                        <input type="number" id="fair-o2" value="1.90" class="input-dark w-32 p-3 text-center rounded text-xl font-mono" placeholder="å®¢èƒœ">
                    </div>
                    <button onclick="calcFair()" class="bg-white text-black px-8 py-3 rounded-xl font-bold hover:bg-gray-200 transition">è®¡ç®—</button>
                    <div id="fair-result" class="mt-8 hidden">
                        <div class="text-gray-400 text-sm">åº„å®¶æŠ½æ°´ (Vig): <span class="text-red-400 font-bold" id="fair-vig">5.26%</span></div>
                        <div class="text-gray-400 text-sm mt-2">çœŸå®æ— æ°´èµ”ç‡: <span class="text-emerald-400 font-bold" id="fair-true">2.00</span></div>
                    </div>
                </div>

            </div>
        </section>

        <!-- DASHBOARD SECTION (å¤ç”¨ä¹‹å‰çš„é€»è¾‘) -->
        <section id="dashboard" class="page-section pt-20">
            <div class="text-center py-8">
                <h1 class="text-2xl font-bold mb-2">å®æ—¶ç›‘æ§ç»ˆç«¯ (Live)</h1>
                <p class="text-xs text-gray-500">Data Source: Supabase Cloud</p>
            </div>
            <div class="max-w-3xl mx-auto space-y-4 px-4" id="match-container">
                <div class="text-center py-10 text-gray-500 animate-pulse">æ­£åœ¨è¿æ¥ AI å«æ˜Ÿä¿¡å·...</div>
            </div>
        </section>

        <!-- EPL SECTION -->
        <section id="epl" class="page-section pt-20">
            <div class="text-center py-8">
                <h1 class="text-2xl font-bold mb-2 text-purple-400">è‹±è¶…èµ›äº‹å‰ç»</h1>
            </div>
            <div class="max-w-3xl mx-auto grid gap-4 px-4" id="epl-container">
                <div class="text-center py-10 text-gray-500 animate-pulse">åŠ è½½ä¸­...</div>
            </div>
        </section>

        <!-- PRICING & GUIDE -->
        <section id="pricing" class="page-section pt-20">
            <div class="max-w-4xl mx-auto px-6 py-12 text-center">
                <h1 class="text-3xl font-bold mb-8">è®¢é˜…ä»·æ ¼</h1>
                <div class="bg-gradient-to-b from-gray-800 to-black border border-emerald-500 p-8 rounded-3xl max-w-sm mx-auto relative overflow-hidden">
                    <div class="absolute top-0 right-0 bg-emerald-600 text-white text-[10px] px-2 py-1 rounded-bl">PRO</div>
                    <h3 class="text-xl font-bold text-emerald-400 mb-2">PRO Trader</h3>
                    <div class="text-5xl font-bold text-white mb-2">RM 68<span class="text-lg text-gray-500">/mo</span></div>
                    <a href="https://t.me/footballscbet_bot" target="_blank" class="block w-full py-4 bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl font-bold mt-6">ç«‹å³è®¢é˜…</a>
                </div>
            </div>
        </section>
        
        <section id="guide" class="page-section pt-20">
            <div class="max-w-4xl mx-auto px-6 py-12 text-center">
                <h1 class="text-3xl font-bold mb-4">å¦‚ä½•ä½¿ç”¨</h1>
                <p class="text-gray-400">ä½¿ç”¨å‡¯åˆ©å…¬å¼ç®¡ç†ä»“ä½ï¼Œåªåœ¨å‹åŠ›å€¼ > 75% æ—¶å…¥åœºã€‚</p>
            </div>
        </section>

    </main>

    <!-- å¼¹çª— -->
    <div id="match-modal" class="fixed inset-0 z-[100] hidden">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" onclick="closeModal()"></div>
        <div class="absolute inset-x-0 bottom-0 md:inset-0 md:flex md:items-center md:justify-center pointer-events-none">
            <div class="bg-[#0f0f0f] md:rounded-2xl md:max-w-2xl w-full p-6 border border-gray-800 shadow-2xl pointer-events-auto" id="modal-panel">
                <div id="modal-content"></div>
                <button onclick="closeModal()" class="mt-6 w-full bg-gray-800 text-white py-3 rounded-xl font-bold hover:bg-gray-700">å…³é—­</button>
            </div>
        </div>
    </div>

    <!-- ğŸš€ æ ¸å¿ƒ JS é€»è¾‘ -->
    <script>
        // --- 1. é¡µé¢ä¸å·¥å…·åˆ‡æ¢ ---
        function switchTab(tabId){
            document.querySelectorAll('.page-section').forEach(el=>{ el.classList.remove('active'); setTimeout(()=>{if(!el.classList.contains('active'))el.style.display='none';},300); });
            const target=document.getElementById(tabId);
            if(target) { target.style.display='block'; setTimeout(()=>target.classList.add('active'),10); }
            
            document.querySelectorAll('.nav-btn').forEach(btn=>{
                btn.classList.remove('bg-white/10', 'text-white'); btn.classList.add('text-gray-400');
                if(btn.getAttribute('data-target') === tabId) { btn.classList.add('bg-white/10', 'text-white'); btn.classList.remove('text-gray-400'); }
            });

            if(tabId === 'dashboard') fetchLiveMatches();
            if(tabId === 'epl') fetchEPL();
        }

        function switchTool(toolId) {
            document.querySelectorAll('.tool-content').forEach(el => el.classList.add('hidden'));
            document.getElementById('tool-' + toolId).classList.remove('hidden');
            document.querySelectorAll('.tool-tab').forEach(btn => {
                btn.classList.remove('bg-emerald-600', 'text-white');
                btn.classList.add('bg-gray-800', 'text-gray-400');
            });
            event.target.classList.remove('bg-gray-800', 'text-gray-400');
            event.target.classList.add('bg-emerald-600', 'text-white');
        }

        // --- 2. è®¡ç®—å™¨é€»è¾‘ ---
        // å‡¯åˆ©å…¬å¼
        const kellyWinSlider = document.getElementById('kelly-win');
        kellyWinSlider.addEventListener('input', (e) => {
            document.getElementById('kelly-win-display').innerText = e.target.value + '%';
            calcKelly();
        });
        function calcKelly() {
            const win = parseFloat(document.getElementById('kelly-win').value) / 100;
            const odds = parseFloat(document.getElementById('kelly-odds').value);
            const bank = parseFloat(document.getElementById('kelly-bank').value);
            
            if(odds <= 1) return;
            const b = odds - 1;
            const f = ((b * win) - (1 - win)) / b;
            
            const resultEl = document.getElementById('kelly-result');
            const pctEl = document.getElementById('kelly-pct');
            
            if (f > 0) {
                const amount = (bank * f).toFixed(0);
                const pct = (f * 100).toFixed(2);
                resultEl.innerText = '$' + amount;
                resultEl.classList.remove('text-red-500');
                resultEl.classList.add('text-white');
                pctEl.innerText = `(${pct}% ä»“ä½)`;
                pctEl.className = "text-sm text-emerald-400 font-bold";
            } else {
                resultEl.innerText = "$0";
                resultEl.classList.add('text-red-500');
                pctEl.innerText = "(è´ŸæœŸæœ›å€¼ï¼Œä¸å»ºè®®ä¸‹æ³¨)";
                pctEl.className = "text-sm text-red-500 font-bold";
            }
        }

        // å¥—åˆ©è®¡ç®—
        function calcArb() {
            const o1 = parseFloat(document.getElementById('arb-odds-1').value);
            const o2 = parseFloat(document.getElementById('arb-odds-2').value);
            const total = parseFloat(document.getElementById('arb-total').value);
            
            if(!o1 || !o2 || !total) return;
            
            const arbP = (1/o1 + 1/o2) * 100;
            const profitPct = 100 - arbP;
            
            document.getElementById('arb-profit-pct').innerText = profitPct.toFixed(2) + '%';
            document.getElementById('arb-profit-pct').style.color = profitPct > 0 ? '#10b981' : '#ef4444';
            
            if(profitPct > 0) {
                const s1 = (total * (1/o1)) / (1/o1 + 1/o2);
                const s2 = total - s1;
                const profit = (total / (1/o1 + 1/o2)) - total;
                
                document.getElementById('arb-stake-1').innerText = '$' + s1.toFixed(2);
                document.getElementById('arb-stake-2').innerText = '$' + s2.toFixed(2);
                document.getElementById('arb-profit-val').innerText = '+$' + profit.toFixed(2);
            }
        }

        // å»æ°´è®¡ç®—
        function calcFair() {
            const o1 = parseFloat(document.getElementById('fair-o1').value);
            const o2 = parseFloat(document.getElementById('fair-o2').value);
            if(!o1 || !o2) return;
            
            const margin = (1/o1 + 1/o2) - 1;
            const fairProb1 = (1/o1) / (1+margin);
            const fairProb2 = (1/o2) / (1+margin);
            const fairOdd = 1/fairProb1;
            
            document.getElementById('fair-result').classList.remove('hidden');
            document.getElementById('fair-vig').innerText = (margin * 100).toFixed(2) + '%';
            document.getElementById('fair-true').innerText = fairOdd.toFixed(2);
        }

        // --- 3. Supabase æ•°æ®é€»è¾‘ (ä¿æŒä¹‹å‰çš„ç¨³å®šç‰ˆ) ---
        const SUPABASE_URL = 'https://ncubbsgzebbmoqslyukd.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_sVNMF9y0NlYxSqjqKqwySw_b1DJyEdg';
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
        
        let matchesData = [];
        const adsData = [
            { type: "ad", content: { brand: "ğŸ‘‘ å®˜æ–¹æ¨è: GSlot16", title: "å…¨ç½‘æœ€ç¨³è€è™æœº/çœŸäººè§†è®¯å¹³å°", desc: "å¤§é¢æ— å¿§ï¼Œç§’å……ç§’æã€‚", btn_text: "è¿›å…¥ GSlot16 å®˜ç½‘", link: "https://gslot16.com?ag=RS-c2VzYW1lcmFiYml0" } },
            { type: "ad", content: { brand: "âš½ BK8 äºšæ´²ç¬¬ä¸€ä½“è‚²", title: "OddsFlow ç‹¬å®¶åˆä½œä¼™ä¼´", desc: "è‹±è¶…å®˜æ–¹èµåŠ©å•†ã€‚ä½“è‚²èµ›äº‹èµ”ç‡æœ€é«˜ã€‚", btn_text: "é¢†å– BK8 çº¢åˆ©", link: "https://www.bk8.com/" } }
        ];

        // Live Fetch
        async function fetchLiveMatches() {
            const container = document.getElementById('match-container');
            try {
                const { data, error } = await supabase.from('live_signals').select('*').order('created_at', { ascending: false }).limit(20);
                if(error) throw error;
                matchesData = [];
                if(data && data.length > 0) {
                    data.forEach((m, i) => {
                        matchesData.push({ type: 'match', result: { match_info: m, beginner_friendly_text: m.recommendation, bet_recommendation: { confidence_level: "High" } } });
                        if(i===0) matchesData.push(adsData[0]);
                        if(i===2) matchesData.push(adsData[1]);
                    });
                    renderMatches();
                } else { container.innerHTML = '<div class="text-center text-gray-500 py-10">AI æ‰«æä¸­...</div>'; }
            } catch(e) { console.error(e); container.innerHTML = '<div class="text-center text-gray-500">è¿æ¥ä¸­...</div>'; }
        }

        function renderMatches() {
            const container = document.getElementById('match-container');
            let html = '';
            matchesData.forEach((data, index) => {
                if(data.type === 'ad') {
                    html += `<div class="bg-gradient-to-r from-yellow-900/40 to-black p-5 rounded-xl border border-yellow-500/50 mb-4"><div class="text-yellow-400 font-bold text-sm mb-1">${data.content.brand}</div><h3 class="text-white font-bold text-lg mb-2">${data.content.title}</h3><a href="${data.content.link}" target="_blank" class="block text-center bg-yellow-500 text-black font-bold py-2 rounded-lg text-sm">${data.content.btn_text}</a></div>`;
                    return;
                }
                const info = data.result.match_info;
                const pVal = parseInt(info.pressure_val) || 50;
                html += `<div onclick="openModal(${index})" class="bg-glass p-5 rounded-xl border-l-4 border-emerald-500 cursor-pointer hover:bg-white/5 transition mb-4"><div class="flex justify-between text-xs text-gray-400 mb-2"><span>${info.league} â€¢ ${info.time}</span><span class="text-emerald-400">Strong Conf</span></div><div class="flex justify-between items-center mb-4"><span class="text-lg font-bold w-1/3 text-right truncate">${info.home_team}</span><span class="px-3 py-1 bg-black/50 rounded text-white font-mono">${info.score}</span><span class="text-lg font-bold w-1/3 text-left truncate">${info.away_team}</span></div><div class="h-2 bg-gray-800 rounded-full overflow-hidden flex shadow-inner"><div style="width: ${pVal}%" class="h-full bg-blue-600"></div><div style="width: ${100-pVal}%" class="h-full bg-red-600"></div></div></div>`;
            });
            container.innerHTML = html;
        }

        // EPL Fetch
        async function fetchEPL() {
            const container = document.getElementById('epl-container');
            try {
                const { data } = await supabase.from('upcoming_epl').select('*').order('created_at', { ascending: false });
                let html = '';
                if(data) {
                    data.forEach(m => {
                        html += `<div class="bg-[#1a1a1a] p-4 rounded-xl border border-purple-900/30"><div class="text-center text-xs text-gray-500 mb-2">${m.venue}</div><div class="flex justify-between items-center"><div class="text-center w-1/3"><img src="${m.home_logo}" class="w-10 h-10 mx-auto mb-1"><div class="font-bold text-white text-xs">${m.home_team}</div></div><div class="text-xl font-bold text-gray-600">VS</div><div class="text-center w-1/3"><img src="${m.away_logo}" class="w-10 h-10 mx-auto mb-1"><div class="font-bold text-white text-xs">${m.away_team}</div></div></div></div>`;
                    });
                    container.innerHTML = html;
                }
            } catch(e) { console.error(e); }
        }

        // Modals
        function openModal(i) {
            const d = matchesData[i].result;
            document.getElementById('modal-content').innerHTML = `<div class="text-center"><h3 class="text-xl font-bold text-white mb-4">${d.match_info.home_team} vs ${d.match_info.away_team}</h3><p class="text-gray-400 text-sm">${d.beginner_friendly_text}</p></div>`;
            document.getElementById('match-modal').classList.remove('hidden');
        }
        function closeModal() { document.getElementById('match-modal').classList.add('hidden'); }
        function toggleLanguage() {}

        // åˆå§‹åŒ–
        switchTab('home');
        calcKelly(); // åˆå§‹åŒ–è®¡ç®—å™¨
    </script>
</body>
</html>
